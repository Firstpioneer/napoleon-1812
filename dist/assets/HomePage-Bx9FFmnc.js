import{f as y,g as L,h as N,i as E,c as u,j as s,k as H,l as m,n as i,a as $,w as S,r as D,m as V,F as P,p as j,u as I,q as Z,t as b,s as Y,v as q,o as f}from"./vendor-jiwSjSMn.js";import{L as l}from"./leaflet-CwTwPtEk.js";/* empty css                */import{n as O,a as U}from"./campaignData-BWYJ6KzS.js";import{k as T}from"./battlesData-cczryqpl.js";import{_ as G}from"./index-CJCr3d_v.js";const J={class:"welcome-content"},K={class:"nav-cards"},Q={class:"nav-links"},W={class:"battle-items"},X=["onClick","onMouseenter"],aa={class:"battle-date"},sa={class:"battle-name"},ea={class:"info-content"},na=["innerHTML"],oa={__name:"HomePage",setup(ta){const k=q(),_=y(null),c=y(null);let o=null,g={};const t=y(!1),v=L({visible:!1,title:"",content:""});function h(){const n=window.scrollY,a=window.innerHeight;n>a*.3?t.value||(t.value=!0,Y(()=>{!o&&c.value?z():o&&o.invalidateSize()})):t.value=!1}function z(){if(!c.value)return;o=l.map(c.value,{center:[54.5,31],zoom:5,zoomControl:!0,attributionControl:!1,minZoom:4,maxZoom:12}),l.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{subdomains:"abcd",maxZoom:19}).addTo(o);const n=O.map(e=>[e.lat,e.lon]);l.polyline(n,{color:"#D4A017",weight:5,opacity:.9}).addTo(o);const a=U.map(e=>[e.lat,e.lon]);l.polyline(a,{color:"#C0392B",weight:4,opacity:.8,dashArray:"12, 8"}).addTo(o),T.forEach(e=>{const F=e.phase==="advance"?"#D4A017":"#C0392B",w=e.type==="major_battle"?14:10,d=l.circleMarker([e.location.lat,e.location.lon],{radius:w,fillColor:F,color:"#FFF",weight:2,fillOpacity:.9}).addTo(o);d.bindTooltip(`
      <div class="map-tooltip">
        <strong>${e.title}</strong><br/>
        <span>${e.date}</span><br/>
        <em>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</em>
      </div>
    `,{direction:"top",offset:[0,-12],className:"custom-tooltip"}),d.on("click",()=>{k.push(`/battle/${e.id}`)}),d.on("mouseover",function(){this.setRadius(w+5),this.setStyle({weight:3})}),d.on("mouseout",function(){this.setRadius(w),this.setStyle({weight:2})}),g[e.id]=d}),[{name:"è«æ–¯ç§‘",lat:55.8,lon:37.6},{name:"æ–¯æ‘©æ£±æ–¯å…‹",lat:54.8,lon:32},{name:"ç»´å°”çº½æ–¯",lat:54.7,lon:25.3}].forEach(e=>{l.marker([e.lat,e.lon],{icon:l.divIcon({className:"city-label",html:`<span>${e.name}</span>`,iconSize:[80,20]})}).addTo(o)})}function B(){window.scrollTo({top:0,behavior:"smooth"})}function x(n){const a=g[n.id];a&&o&&(a.setRadius(18),a.setStyle({fillColor:"#FFD700",weight:3}),o.panTo([n.location.lat,n.location.lon],{animate:!0}))}function A(){T.forEach(n=>{const a=g[n.id];if(a){const r=n.phase==="advance",e=n.type==="major_battle"?14:10;a.setRadius(e),a.setStyle({fillColor:r?"#D4A017":"#C0392B",weight:2})}})}function R(n){k.push(`/battle/${n}`)}function p(n){k.push(n)}function M(){v.visible=!1}return N(()=>{window.addEventListener("scroll",h),h()}),E(()=>{window.removeEventListener("scroll",h),o&&(o.remove(),o=null)}),(n,a)=>{const r=D("router-link");return f(),u("div",{class:"home-page",ref_key:"pageRef",ref:_},[s("section",{class:i(["welcome-screen",{"fade-out":t.value}])},[s("div",J,[a[9]||(a[9]=s("div",{class:"hero-section"},[s("h1",{class:"hero-title"},"1812"),s("h2",{class:"hero-subtitle"},"æ‹¿ç ´ä»‘ä¿„å›½è¿œå¾"),s("p",{class:"hero-desc"},[m(" æ¢ç´¢å†å²ä¸Šæœ€å…·æ‚²å‰§æ€§çš„å†›äº‹è¡ŒåŠ¨"),s("br"),m(" 422,000äººå‡ºå‘ï¼Œä»…10,000äººç”Ÿè¿˜ ")])],-1)),s("div",K,[s("div",{class:"nav-card featured",onClick:a[0]||(a[0]=e=>p("/game"))},[...a[5]||(a[5]=[s("span",{class:"card-icon"},"ğŸ®",-1),s("h4",null,"ç»æœ›çš„è¡Œå†›",-1),s("p",null,"ä½“éªŒ1812è¿œå¾",-1)])]),s("div",{class:"nav-card",onClick:a[1]||(a[1]=e=>p("/dashboard"))},[...a[6]||(a[6]=[s("span",{class:"card-icon"},"ğŸ“Š",-1),s("h4",null,"å•å±ä»ªè¡¨ç›˜",-1),s("p",null,"å¤šè§†å›¾è”åŠ¨åˆ†æ",-1)])]),s("div",{class:"nav-card",onClick:a[2]||(a[2]=e=>p("/visualization"))},[...a[7]||(a[7]=[s("span",{class:"card-icon"},"ğŸ—º",-1),s("h4",null,"æ»šåŠ¨å™äº‹",-1),s("p",null,"äº¤äº’å¼åœ°å›¾æ•…äº‹",-1)])]),s("div",{class:"nav-card",onClick:a[3]||(a[3]=e=>p("/reading"))},[...a[8]||(a[8]=[s("span",{class:"card-icon"},"ğŸ“–",-1),s("h4",null,"å†å²æ¡£æ¡ˆ",-1),s("p",null,"è¯¦ç»†æˆ˜å½¹è®°å½•",-1)])])]),a[10]||(a[10]=s("div",{class:"scroll-hint"},[s("span",null,"å‘ä¸‹æ»šåŠ¨æ¢ç´¢æˆ˜å½¹åœ°å›¾"),s("div",{class:"scroll-arrow"},"â†“")],-1))])],2),s("section",{class:i(["map-screen",{active:t.value}])},[s("div",{class:"map-container",ref_key:"mapContainer",ref:c},null,512),s("div",{class:i(["map-nav",{visible:t.value}])},[s("button",{class:"nav-btn back-top",onClick:B}," â†‘ è¿”å›é¡¶éƒ¨ "),s("div",Q,[$(r,{to:"/visualization",class:"nav-link"},{default:S(()=>[...a[11]||(a[11]=[m("å¯è§†åŒ–åˆ†æ",-1)])]),_:1}),$(r,{to:"/reading",class:"nav-link"},{default:S(()=>[...a[12]||(a[12]=[m("å†å²æ¡£æ¡ˆ",-1)])]),_:1})])],2),s("div",{class:i(["map-info-panel",{visible:t.value}])},[...a[13]||(a[13]=[V('<h3 data-v-360a81c2>1812å¹´ä¿„å›½æˆ˜å½¹</h3><p data-v-360a81c2>ç‚¹å‡»åœ°å›¾ä¸Šçš„æ ‡è®°ç‚¹æŸ¥çœ‹æˆ˜å½¹è¯¦æƒ…</p><div class="legend" data-v-360a81c2><div class="legend-item" data-v-360a81c2><span class="dot advance" data-v-360a81c2></span>è¿›æ”»é˜¶æ®µæˆ˜å½¹ </div><div class="legend-item" data-v-360a81c2><span class="dot retreat" data-v-360a81c2></span>æ’¤é€€é˜¶æ®µæˆ˜å½¹ </div><div class="legend-item" data-v-360a81c2><span class="line advance" data-v-360a81c2></span>è¿›æ”»è·¯çº¿ </div><div class="legend-item" data-v-360a81c2><span class="line retreat" data-v-360a81c2></span>æ’¤é€€è·¯çº¿ </div></div>',3)])],2),s("div",{class:i(["battle-list",{visible:t.value}])},[a[14]||(a[14]=s("h4",null,"å…³é”®æˆ˜å½¹",-1)),s("div",W,[(f(!0),u(P,null,j(I(T),e=>(f(),u("div",{key:e.id,class:i(["battle-item",e.phase]),onClick:C=>R(e.id),onMouseenter:C=>x(e),onMouseleave:a[4]||(a[4]=C=>A())},[s("span",aa,b(e.date.split("å¹´")[1]||e.date),1),s("span",sa,b(e.title),1)],42,X))),128))])],2)],2),v.visible?(f(),u("div",{key:0,class:"info-panel",onClick:Z(M,["self"])},[s("div",ea,[s("button",{class:"close-btn",onClick:M},"Ã—"),s("h3",null,b(v.title),1),s("div",{innerHTML:v.content},null,8,na)])])):H("",!0)],512)}}},pa=G(oa,[["__scopeId","data-v-360a81c2"]]);export{pa as default};
