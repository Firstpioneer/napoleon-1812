import{f as E,k as d,G as H,l as P,m as j,p as q,c as o,h as t,i as m,a as k,C as y,r as A,t as a,n as F,q as R,F as C,s as B,u as G,o as i,j as w}from"./vendor-Clkip-va.js";import{L as x}from"./leaflet-CwTwPtEk.js";import{k as u}from"./battlesData-cczryqpl.js";import{_ as O}from"./index-ClHyWALH.js";const U={class:"battle-detail-page"},W={class:"nav-bar"},Z={class:"battle-nav"},J={class:"header-overlay"},K={class:"header-content"},Q={class:"battle-title"},X={class:"battle-title-en"},Y={class:"battle-date"},tt={key:0,class:"battle-main"},st={class:"content-grid"},et={class:"content-left"},at={class:"overview-section"},lt={class:"overview-text"},nt={class:"detail-section"},ot=["innerHTML"],it={class:"content-right"},rt={class:"stats-card"},dt={class:"stats-grid"},ut={class:"stat-item"},ct={class:"stat-value french"},vt={class:"stat-item"},_t={class:"stat-value russian"},mt={class:"stat-item"},pt={class:"stat-value casualty"},ft={class:"stat-item"},ht={class:"stat-value casualty"},bt={class:"stat-item full"},gt={class:"stat-value temp"},kt={class:"commanders-card"},yt={class:"commanders-group"},Ct={class:"commander-side french"},Bt={class:"commander-side russian"},wt={class:"location-card"},xt={class:"action-card"},Tt={key:1,class:"related-battles"},Mt={class:"battles-grid"},zt=["onClick"],It={class:"card-content"},Lt={__name:"BattleDetailPage",setup($t){const V=H(),S=G(),p=E(null);let r=null;const c=d(()=>V.params.id),e=d(()=>u.find(n=>n.id===c.value)),v=d(()=>u.findIndex(n=>n.id===c.value)),f=d(()=>v.value>0?u[v.value-1]:null),h=d(()=>v.value<u.length-1?u[v.value+1]:null),T=d(()=>e.value?u.filter(n=>n.id!==c.value&&n.phase===e.value.phase).slice(0,3):[]);function _(n){return n?n.toLocaleString():"-"}function b(n){S.push(`/battle/${n}`)}function M(){!p.value||!e.value||(r&&r.remove(),r=x.map(p.value,{center:[e.value.location.lat,e.value.location.lon],zoom:6,zoomControl:!1,attributionControl:!1,dragging:!1,scrollWheelZoom:!1}),x.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{subdomains:"abcd"}).addTo(r),x.circleMarker([e.value.location.lat,e.value.location.lon],{radius:10,fillColor:e.value.phase==="advance"?"#D4A017":"#8B0000",color:"#FFD700",weight:3,fillOpacity:.8}).addTo(r))}return P(()=>{M()}),j(()=>{r&&r.remove()}),q(c,()=>{setTimeout(M,100),window.scrollTo(0,0)}),(n,s)=>{var z,I,L,$,D,N;const g=A("router-link");return i(),o("div",U,[t("div",W,[k(g,{to:"/",class:"back-btn"},{default:y(()=>[...s[2]||(s[2]=[w("â† é¦–é¡µ",-1)])]),_:1}),t("div",Z,[f.value?(i(),o("button",{key:0,onClick:s[0]||(s[0]=l=>b(f.value.id)),class:"nav-arrow"},"â† "+a(f.value.title),1)):m("",!0),h.value?(i(),o("button",{key:1,onClick:s[1]||(s[1]=l=>b(h.value.id)),class:"nav-arrow"},a(h.value.title)+" â†’",1)):m("",!0)])]),t("header",{class:"battle-header",style:R({backgroundImage:`url(${(z=e.value)==null?void 0:z.image})`})},[t("div",J,[t("div",K,[t("span",{class:F(["battle-type",(I=e.value)==null?void 0:I.phase])},a(((L=e.value)==null?void 0:L.phase)==="advance"?"è¿›æ”»é˜¶æ®µ":"æ’¤é€€é˜¶æ®µ"),3),t("h1",Q,a(($=e.value)==null?void 0:$.title),1),t("h2",X,a((D=e.value)==null?void 0:D.titleEn),1),t("p",Y,a((N=e.value)==null?void 0:N.date),1)])])],4),e.value?(i(),o("main",tt,[t("div",st,[t("div",et,[t("section",at,[t("p",lt,a(e.value.overview),1)]),t("section",nt,[t("div",{innerHTML:e.value.content},null,8,ot)])]),t("aside",it,[t("div",rt,[s[8]||(s[8]=t("h3",null,"ðŸ“Š æˆ˜å½¹æ•°æ®",-1)),t("div",dt,[t("div",ut,[s[3]||(s[3]=t("span",{class:"stat-label"},"æ³•å†›å…µåŠ›",-1)),t("span",ct,a(_(e.value.stats.frenchTroops)),1)]),t("div",vt,[s[4]||(s[4]=t("span",{class:"stat-label"},"ä¿„å†›å…µåŠ›",-1)),t("span",_t,a(_(e.value.stats.russianTroops)),1)]),t("div",mt,[s[5]||(s[5]=t("span",{class:"stat-label"},"æ³•å†›ä¼¤äº¡",-1)),t("span",pt,a(_(e.value.stats.frenchCasualties)),1)]),t("div",ft,[s[6]||(s[6]=t("span",{class:"stat-label"},"ä¿„å†›ä¼¤äº¡",-1)),t("span",ht,a(_(e.value.stats.russianCasualties)),1)]),t("div",bt,[s[7]||(s[7]=t("span",{class:"stat-label"},"æ°”æ¸©",-1)),t("span",gt,a(e.value.stats.temperature),1)])])]),t("div",kt,[s[11]||(s[11]=t("h3",null,"âš” æŒ‡æŒ¥å®˜",-1)),t("div",yt,[t("div",Ct,[s[9]||(s[9]=t("span",{class:"side-label"},"æ³•å†›",-1)),t("ul",null,[(i(!0),o(C,null,B(e.value.commanders.french,l=>(i(),o("li",{key:l},a(l),1))),128))])]),t("div",Bt,[s[10]||(s[10]=t("span",{class:"side-label"},"ä¿„å†›",-1)),t("ul",null,[(i(!0),o(C,null,B(e.value.commanders.russian,l=>(i(),o("li",{key:l},a(l),1))),128))])])])]),t("div",wt,[s[12]||(s[12]=t("h3",null,"ðŸ“ æˆ˜å½¹ä½ç½®",-1)),t("div",{class:"mini-map",ref_key:"miniMapRef",ref:p},null,512)]),t("div",xt,[k(g,{to:"/visualization",class:"action-btn primary"},{default:y(()=>[...s[13]||(s[13]=[w(" ðŸ—º æŸ¥çœ‹å®Œæ•´å¯è§†åŒ– ",-1)])]),_:1}),k(g,{to:"/reading",class:"action-btn secondary"},{default:y(()=>[...s[14]||(s[14]=[w(" ðŸ“– é˜…è¯»åŽ†å²æ¡£æ¡ˆ ",-1)])]),_:1})])])])])):m("",!0),T.value.length?(i(),o("section",Tt,[s[15]||(s[15]=t("h2",null,"ç›¸å…³æˆ˜å½¹",-1)),t("div",Mt,[(i(!0),o(C,null,B(T.value,l=>(i(),o("div",{key:l.id,class:"battle-card",onClick:Dt=>b(l.id)},[t("div",{class:"card-image",style:R({backgroundImage:`url(${l.image})`})},[t("span",{class:F(["card-phase",l.phase])},a(l.phase==="advance"?"è¿›æ”»":"æ’¤é€€"),3)],4),t("div",It,[t("h4",null,a(l.title),1),t("p",null,a(l.date),1)])],8,zt))),128))])])):m("",!0)])}}},St=O(Lt,[["__scopeId","data-v-98e67fb4"]]);export{St as default};
