import{f as w,g as D,h as E,i as H,c as p,j as s,k as V,l as u,n as r,a as M,w as B,r as I,m as P,F as j,p as Z,u as O,q as Y,t as C,s as q,v as G,o as m}from"./vendor-BJUVBghG.js";import{L as i}from"./leaflet-CwTwPtEk.js";/* empty css                */import{n as U,a as J}from"./campaignData-BWYJ6KzS.js";import{k as y}from"./battlesData-lWkkDd5g.js";import{_ as K}from"./index-CQjYqnbq.js";const Q={class:"welcome-content"},W={class:"nav-cards"},X={class:"nav-links"},ee={class:"battle-items"},se=["onClick","onMouseenter"],oe={class:"battle-date"},ne={class:"battle-name"},te={class:"info-content"},ae=["innerHTML"],le={__name:"HomePage",setup(ie){const f=G(),S=w(null),v=w(null);let t=null,b={};const a=w(!1),l=D({visible:!1,title:"",content:""}),$={corps:{title:"å†›å›¢ç¼–åˆ¶ / Order of Battle",content:`
      <p><strong>å¤§å†›å›¢ (Grande ArmÃ©e) 1812å¹´ç¼–åˆ¶ï¼š</strong></p>
      <ul>
        <li>å¸å›½è¿‘å«å†› - 47,000äºº</li>
        <li>ç¬¬1å†›(è¾¾æ­¦) - 72,000äºº</li>
        <li>ç¬¬2å†›(ä¹Œè¿ªè¯º) - 37,000äºº</li>
        <li>ç¬¬3å†›(å†…ä¼Š) - 39,000äºº</li>
        <li>ç¬¬4å†›(æ¬§ä») - 45,000äºº</li>
        <li>éª‘å…µé¢„å¤‡é˜Ÿ - 40,000äºº</li>
      </ul>
      <p>æ€»è®¡çº¦422,000äººå‚ä¸è¿›æ”»</p>
    `}};function h(){const n=window.scrollY,e=window.innerHeight;n>e*.3?a.value||(a.value=!0,q(()=>{!t&&v.value?z():t&&t.invalidateSize()})):a.value=!1}function z(){if(!v.value)return;t=i.map(v.value,{center:[54.5,31],zoom:5,zoomControl:!0,attributionControl:!1,minZoom:4,maxZoom:12}),i.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{subdomains:"abcd",maxZoom:19}).addTo(t);const n=U.map(o=>[o.lat,o.lon]);i.polyline(n,{color:"#D4A017",weight:5,opacity:.9}).addTo(t);const e=J.map(o=>[o.lat,o.lon]);i.polyline(e,{color:"#C0392B",weight:4,opacity:.8,dashArray:"12, 8"}).addTo(t),y.forEach(o=>{const N=o.phase==="advance"?"#D4A017":"#C0392B",k=o.type==="major_battle"?14:10,c=i.circleMarker([o.location.lat,o.location.lon],{radius:k,fillColor:N,color:"#FFF",weight:2,fillOpacity:.9}).addTo(t);c.bindTooltip(`
      <div class="map-tooltip">
        <strong>${o.title}</strong><br/>
        <span>${o.date}</span><br/>
        <em>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</em>
      </div>
    `,{direction:"top",offset:[0,-12],className:"custom-tooltip"}),c.on("click",()=>{f.push(`/battle/${o.id}`)}),c.on("mouseover",function(){this.setRadius(k+5),this.setStyle({weight:3})}),c.on("mouseout",function(){this.setRadius(k),this.setStyle({weight:2})}),b[o.id]=c}),[{name:"è«æ–¯ç§‘",lat:55.8,lon:37.6},{name:"æ–¯æ‘©æ£±æ–¯å…‹",lat:54.8,lon:32},{name:"ç»´å°”çº½æ–¯",lat:54.7,lon:25.3}].forEach(o=>{i.marker([o.lat,o.lon],{icon:i.divIcon({className:"city-label",html:`<span>${o.name}</span>`,iconSize:[80,20]})}).addTo(t)})}function x(){window.scrollTo({top:0,behavior:"smooth"})}function A(n){const e=b[n.id];e&&t&&(e.setRadius(18),e.setStyle({fillColor:"#FFD700",weight:3}),t.panTo([n.location.lat,n.location.lon],{animate:!0}))}function R(){y.forEach(n=>{const e=b[n.id];if(e){const d=n.phase==="advance",o=n.type==="major_battle"?14:10;e.setRadius(o),e.setStyle({fillColor:d?"#D4A017":"#C0392B",weight:2})}})}function F(n){f.push(`/battle/${n}`)}function T(n){f.push(n)}function L(n){const e=$[n];e&&(l.title=e.title,l.content=e.content,l.visible=!0)}function _(){l.visible=!1}return E(()=>{window.addEventListener("scroll",h),h()}),H(()=>{window.removeEventListener("scroll",h),t&&(t.remove(),t=null)}),(n,e)=>{const d=I("router-link");return m(),p("div",{class:"home-page",ref_key:"pageRef",ref:S},[s("section",{class:r(["welcome-screen",{"fade-out":a.value}])},[s("div",Q,[e[7]||(e[7]=s("div",{class:"hero-section"},[s("h1",{class:"hero-title"},"1812"),s("h2",{class:"hero-subtitle"},"æ‹¿ç ´ä»‘ä¿„å›½è¿œå¾"),s("p",{class:"hero-desc"},[u(" æ¢ç´¢å†å²ä¸Šæœ€å…·æ‚²å‰§æ€§çš„å†›äº‹è¡ŒåŠ¨"),s("br"),u(" 422,000äººå‡ºå‘ï¼Œä»…10,000äººç”Ÿè¿˜ ")])],-1)),s("div",W,[s("div",{class:"nav-card",onClick:e[0]||(e[0]=o=>T("/visualization"))},[...e[4]||(e[4]=[s("span",{class:"card-icon"},"ğŸ—º",-1),s("h4",null,"æˆ˜å½¹å¯è§†åŒ–",-1),s("p",null,"äº¤äº’å¼åœ°å›¾åˆ†æ",-1)])]),s("div",{class:"nav-card",onClick:e[1]||(e[1]=o=>T("/reading"))},[...e[5]||(e[5]=[s("span",{class:"card-icon"},"ğŸ“–",-1),s("h4",null,"å†å²æ¡£æ¡ˆ",-1),s("p",null,"è¯¦ç»†æˆ˜å½¹è®°å½•",-1)])]),s("div",{class:"nav-card",onClick:e[2]||(e[2]=o=>L("corps"))},[...e[6]||(e[6]=[s("span",{class:"card-icon"},"âš”",-1),s("h4",null,"å†›å›¢ç¼–åˆ¶",-1),s("p",null,"å¤§å†›å›¢ç»„ç»‡",-1)])])]),e[8]||(e[8]=s("div",{class:"scroll-hint"},[s("span",null,"å‘ä¸‹æ»šåŠ¨æ¢ç´¢æˆ˜å½¹åœ°å›¾"),s("div",{class:"scroll-arrow"},"â†“")],-1))])],2),s("section",{class:r(["map-screen",{active:a.value}])},[s("div",{class:"map-container",ref_key:"mapContainer",ref:v},null,512),s("div",{class:r(["map-nav",{visible:a.value}])},[s("button",{class:"nav-btn back-top",onClick:x}," â†‘ è¿”å›é¡¶éƒ¨ "),s("div",X,[M(d,{to:"/visualization",class:"nav-link"},{default:B(()=>[...e[9]||(e[9]=[u("å¯è§†åŒ–åˆ†æ",-1)])]),_:1}),M(d,{to:"/reading",class:"nav-link"},{default:B(()=>[...e[10]||(e[10]=[u("å†å²æ¡£æ¡ˆ",-1)])]),_:1})])],2),s("div",{class:r(["map-info-panel",{visible:a.value}])},[...e[11]||(e[11]=[P('<h3 data-v-05bbf8d8>1812å¹´ä¿„å›½æˆ˜å½¹</h3><p data-v-05bbf8d8>ç‚¹å‡»åœ°å›¾ä¸Šçš„æ ‡è®°ç‚¹æŸ¥çœ‹æˆ˜å½¹è¯¦æƒ…</p><div class="legend" data-v-05bbf8d8><div class="legend-item" data-v-05bbf8d8><span class="dot advance" data-v-05bbf8d8></span>è¿›æ”»é˜¶æ®µæˆ˜å½¹ </div><div class="legend-item" data-v-05bbf8d8><span class="dot retreat" data-v-05bbf8d8></span>æ’¤é€€é˜¶æ®µæˆ˜å½¹ </div><div class="legend-item" data-v-05bbf8d8><span class="line advance" data-v-05bbf8d8></span>è¿›æ”»è·¯çº¿ </div><div class="legend-item" data-v-05bbf8d8><span class="line retreat" data-v-05bbf8d8></span>æ’¤é€€è·¯çº¿ </div></div>',3)])],2),s("div",{class:r(["battle-list",{visible:a.value}])},[e[12]||(e[12]=s("h4",null,"å…³é”®æˆ˜å½¹",-1)),s("div",ee,[(m(!0),p(j,null,Z(O(y),o=>(m(),p("div",{key:o.id,class:r(["battle-item",o.phase]),onClick:g=>F(o.id),onMouseenter:g=>A(o),onMouseleave:e[3]||(e[3]=g=>R())},[s("span",oe,C(o.date.split("å¹´")[1]||o.date),1),s("span",ne,C(o.title),1)],42,se))),128))])],2)],2),l.visible?(m(),p("div",{key:0,class:"info-panel",onClick:Y(_,["self"])},[s("div",te,[s("button",{class:"close-btn",onClick:_},"Ã—"),s("h3",null,C(l.title),1),s("div",{innerHTML:l.content},null,8,ae)])])):V("",!0)],512)}}},me=K(le,[["__scopeId","data-v-05bbf8d8"]]);export{me as default};
