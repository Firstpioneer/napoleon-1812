import{f as H,k as d,G as P,l as j,m as q,p as A,c as o,h as t,i as m,t as a,n as D,q as N,F as g,s as k,a as F,C as R,r as G,u as O,o as i,j as V}from"./vendor-Clkip-va.js";import{L as y}from"./leaflet-CwTwPtEk.js";import{k as c}from"./battlesData-BLmEpcsS.js";import{_ as U}from"./index-D1XM5ZaZ.js";const W={class:"battle-detail-page"},Z={class:"nav-bar"},J={class:"battle-nav"},K={class:"header-overlay"},Q={class:"header-content"},X={class:"battle-title"},Y={class:"battle-title-en"},tt={class:"battle-date"},st={key:0,class:"battle-main"},et={class:"content-grid"},at={class:"content-left"},lt={class:"overview-section"},nt={class:"overview-text"},ot={class:"detail-section"},it=["innerHTML"],rt={class:"content-right"},dt={class:"stats-card"},ct={class:"stats-grid"},ut={class:"stat-item"},vt={class:"stat-value french"},_t={class:"stat-item"},mt={class:"stat-value russian"},pt={class:"stat-item"},ht={class:"stat-value casualty"},ft={class:"stat-item"},bt={class:"stat-value casualty"},gt={class:"stat-item full"},kt={class:"stat-value temp"},yt={class:"commanders-card"},Ct={class:"commanders-group"},Bt={class:"commander-side french"},wt={class:"commander-side russian"},xt={class:"location-card"},Tt={class:"action-card"},Mt={key:1,class:"related-battles"},zt={class:"battles-grid"},It=["onClick"],Lt={class:"card-content"},$t={__name:"BattleDetailPage",setup(Dt){const S=P(),C=O(),p=H(null);let r=null;const u=d(()=>S.params.id),e=d(()=>c.find(n=>n.id===u.value)),v=d(()=>c.findIndex(n=>n.id===u.value)),h=d(()=>v.value>0?c[v.value-1]:null),f=d(()=>v.value<c.length-1?c[v.value+1]:null),B=d(()=>e.value?c.filter(n=>n.id!==u.value&&n.phase===e.value.phase).slice(0,3):[]);function _(n){return n?n.toLocaleString():"-"}function b(n){C.push(`/battle/${n}`)}function E(){C.back()}function w(){!p.value||!e.value||(r&&r.remove(),r=y.map(p.value,{center:[e.value.location.lat,e.value.location.lon],zoom:6,zoomControl:!1,attributionControl:!1,dragging:!1,scrollWheelZoom:!1}),y.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{subdomains:"abcd"}).addTo(r),y.circleMarker([e.value.location.lat,e.value.location.lon],{radius:10,fillColor:e.value.phase==="advance"?"#D4A017":"#8B0000",color:"#FFD700",weight:3,fillOpacity:.8}).addTo(r))}return j(()=>{w()}),q(()=>{r&&r.remove()}),A(u,()=>{setTimeout(w,100),window.scrollTo(0,0)}),(n,s)=>{var T,M,z,I,L,$;const x=G("router-link");return i(),o("div",W,[t("div",Z,[t("button",{class:"back-btn",onClick:E},"â† è¿”å›ž"),t("div",J,[h.value?(i(),o("button",{key:0,onClick:s[0]||(s[0]=l=>b(h.value.id)),class:"nav-arrow"},"â† "+a(h.value.title),1)):m("",!0),f.value?(i(),o("button",{key:1,onClick:s[1]||(s[1]=l=>b(f.value.id)),class:"nav-arrow"},a(f.value.title)+" â†’",1)):m("",!0)])]),t("header",{class:"battle-header",style:N({backgroundImage:`url(${(T=e.value)==null?void 0:T.image})`})},[t("div",K,[t("div",Q,[t("span",{class:D(["battle-type",(M=e.value)==null?void 0:M.phase])},a(((z=e.value)==null?void 0:z.phase)==="advance"?"è¿›æ”»é˜¶æ®µ":"æ’¤é€€é˜¶æ®µ"),3),t("h1",X,a((I=e.value)==null?void 0:I.title),1),t("h2",Y,a((L=e.value)==null?void 0:L.titleEn),1),t("p",tt,a(($=e.value)==null?void 0:$.date),1)])])],4),e.value?(i(),o("main",st,[t("div",et,[t("div",at,[t("section",lt,[t("p",nt,a(e.value.overview),1)]),t("section",ot,[t("div",{innerHTML:e.value.content},null,8,it)])]),t("aside",rt,[t("div",dt,[s[7]||(s[7]=t("h3",null,"ðŸ“Š æˆ˜å½¹æ•°æ®",-1)),t("div",ct,[t("div",ut,[s[2]||(s[2]=t("span",{class:"stat-label"},"æ³•å†›å…µåŠ›",-1)),t("span",vt,a(_(e.value.stats.frenchTroops)),1)]),t("div",_t,[s[3]||(s[3]=t("span",{class:"stat-label"},"ä¿„å†›å…µåŠ›",-1)),t("span",mt,a(_(e.value.stats.russianTroops)),1)]),t("div",pt,[s[4]||(s[4]=t("span",{class:"stat-label"},"æ³•å†›ä¼¤äº¡",-1)),t("span",ht,a(_(e.value.stats.frenchCasualties)),1)]),t("div",ft,[s[5]||(s[5]=t("span",{class:"stat-label"},"ä¿„å†›ä¼¤äº¡",-1)),t("span",bt,a(_(e.value.stats.russianCasualties)),1)]),t("div",gt,[s[6]||(s[6]=t("span",{class:"stat-label"},"æ°”æ¸©",-1)),t("span",kt,a(e.value.stats.temperature),1)])])]),t("div",yt,[s[10]||(s[10]=t("h3",null,"âš” æŒ‡æŒ¥å®˜",-1)),t("div",Ct,[t("div",Bt,[s[8]||(s[8]=t("span",{class:"side-label"},"æ³•å†›",-1)),t("ul",null,[(i(!0),o(g,null,k(e.value.commanders.french,l=>(i(),o("li",{key:l},a(l),1))),128))])]),t("div",wt,[s[9]||(s[9]=t("span",{class:"side-label"},"ä¿„å†›",-1)),t("ul",null,[(i(!0),o(g,null,k(e.value.commanders.russian,l=>(i(),o("li",{key:l},a(l),1))),128))])])])]),t("div",xt,[s[11]||(s[11]=t("h3",null,"ðŸ“ æˆ˜å½¹ä½ç½®",-1)),t("div",{class:"mini-map",ref_key:"miniMapRef",ref:p},null,512)]),t("div",Tt,[F(x,{to:"/visualization",class:"action-btn primary"},{default:R(()=>[...s[12]||(s[12]=[V(" ðŸ—º æŸ¥çœ‹å®Œæ•´å¯è§†åŒ– ",-1)])]),_:1}),F(x,{to:"/reading",class:"action-btn secondary"},{default:R(()=>[...s[13]||(s[13]=[V(" ðŸ“– é˜…è¯»åŽ†å²æ¡£æ¡ˆ ",-1)])]),_:1})])])])])):m("",!0),B.value.length?(i(),o("section",Mt,[s[14]||(s[14]=t("h2",null,"ç›¸å…³æˆ˜å½¹",-1)),t("div",zt,[(i(!0),o(g,null,k(B.value,l=>(i(),o("div",{key:l.id,class:"battle-card",onClick:Nt=>b(l.id)},[t("div",{class:"card-image",style:N({backgroundImage:`url(${l.image})`})},[t("span",{class:D(["card-phase",l.phase])},a(l.phase==="advance"?"è¿›æ”»":"æ’¤é€€"),3)],4),t("div",Lt,[t("h4",null,a(l.title),1),t("p",null,a(l.date),1)])],8,It))),128))])])):m("",!0)])}}},Et=U($t,[["__scopeId","data-v-af4c74bc"]]);export{Et as default};
